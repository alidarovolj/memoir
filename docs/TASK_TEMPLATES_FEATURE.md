# üìã Task Templates Feature

**–°—Ç–∞—Ç—É—Å:** ‚úÖ 100% –≥–æ—Ç–æ–≤–æ!  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 9 –¥–µ–∫–∞–±—Ä—è 2025

---

## üéØ –ß—Ç–æ —ç—Ç–æ?

Task Templates - —Å–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∑–∞–¥–∞—á –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á –∏ —Ä—É—Ç–∏–Ω.

**–î–≤–∞ —Ç–∏–ø–∞ —à–∞–±–ª–æ–Ω–æ–≤:**
1. **–°–∏—Å—Ç–µ–º–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã** - –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –≤—Å–µ—Ö (—É—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞, workout, —É–±–æ—Ä–∫–∞ –∏ —Ç.–¥.)
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã** - —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∞–º–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### Backend (100%) ‚úÖ
- ‚úÖ **–ú–æ–¥–µ–ª—å TaskTemplate**
  - –•—Ä–∞–Ω–∏—Ç name, description, icon, task_data (JSON)
  - –ü–æ–ª—è: is_system, user_id, category_id, usage_count
  - –ú–∏–≥—Ä–∞—Ü–∏—è: `2025_12_09_0255-create_task_templates_table.py`

- ‚úÖ **API Endpoints** (`/api/v1/task-templates`)
  - `GET /` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
  - `GET /{id}` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω
  - `POST /` - —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `PUT /{id}` - –æ–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
  - `DELETE /{id}` - —É–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω
  - `POST /{id}/use` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –∏–∑ —à–∞–±–ª–æ–Ω–∞

- ‚úÖ **8 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤**
  - üåÖ –£—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞
  - üåô –í–µ—á–µ—Ä–Ω—è—è —Ä—É—Ç–∏–Ω–∞
  - üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
  - üìö –£—á–µ–±–∞/Work Session (Pomodoro)
  - üßπ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞
  - üõí –ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
  - üßò –ú–µ–¥–∏—Ç–∞—Ü–∏—è
  - üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–µ–ª–∏

### Frontend (100%) ‚úÖ
- ‚úÖ **TaskTemplateModel** (freezed) —Å JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **TaskTemplateRemoteDataSource** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- ‚úÖ **TaskTemplatesPage** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
  - –ü–æ–∏—Å–∫ –ø–æ —à–∞–±–ª–æ–Ω–∞–º
  - –§–∏–ª—å—Ç—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö
  - –ö—Ä–∞—Å–∏–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
  - One-click –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CreateTaskPage**
  - –ö–Ω–æ–ø–∫–∞ "–í—ã–±—Ä–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞" –≤ AppBar
  - –ü–µ—Ä–µ—Ö–æ–¥ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —à–∞–±–ª–æ–Ω–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î

```bash
cd backend
docker-compose exec backend alembic upgrade head
```

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Docker
docker-compose exec backend python -m app.db.seed_templates

# –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ
cd backend
python -m app.db.seed_templates
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

**–í Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
2. –ù–∞–∂–º–∏—Ç–µ –∏–∫–æ–Ω–∫—É üìã (Albums) –≤ AppBar
3. –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞
4. –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ task_data:

```json
{
  "title": "–£—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞",
  "description": "–ù–∞—á–Ω–∏ –¥–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ",
  "priority": "medium",
  "time_scope": "daily",
  "scheduled_time": "08:00",
  "is_recurring": true,
  "recurrence_rule": "FREQ=DAILY",
  "tags": ["routine", "health", "morning"],
  "subtasks": [
    {"title": "–ó–∞—Ä—è–¥–∫–∞ 15 –º–∏–Ω—É—Ç", "order": 0},
    {"title": "–î—É—à", "order": 1},
    {"title": "–ó–¥–æ—Ä–æ–≤—ã–π –∑–∞–≤—Ç—Ä–∞–∫", "order": 2}
  ]
}
```

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –∏–∑ —à–∞–±–ª–æ–Ω–∞

```dart
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
final task = await dataSource.useTemplate(
  templateId,
  const UseTemplateRequest(),
);

// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å due_date –∏ scheduled_time
final task = await dataSource.useTemplate(
  templateId,
  UseTemplateRequest(
    dueDate: DateTime.now().add(Duration(days: 1)),
    scheduledTime: '09:00',
  ),
);
```

### –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —à–∞–±–ª–æ–Ω

```dart
await dataSource.createTemplate({
  'name': '–ú–æ—è —Ä—É—Ç–∏–Ω–∞',
  'description': '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Ä—É—Ç–∏–Ω–∞',
  'icon': '‚ö°',
  'task_data': {
    'title': '–ú–æ—è —Ä—É—Ç–∏–Ω–∞',
    'priority': 'high',
    'time_scope': 'daily',
    'subtasks': [
      {'title': '–®–∞–≥ 1', 'order': 0},
      {'title': '–®–∞–≥ 2', 'order': 1},
    ],
  },
});
```

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

–ö–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ —à–∞–±–ª–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, `usage_count` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 1.  
–®–∞–±–ª–æ–Ω—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ (usage_count DESC).

---

## üîÑ Workflow:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Create Task
   ‚Üì
2. –ù–∞–∂–∏–º–∞–µ—Ç "–í—ã–±—Ä–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞"
   ‚Üì
3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Templates Library
   ‚Üì
4. –í–∏–¥–∏—Ç 8 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ + —Å–≤–æ–∏ —à–∞–±–ª–æ–Ω—ã
   ‚Üì
5. –í—ã–±–∏—Ä–∞–µ—Ç "üåÖ –£—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞"
   ‚Üì
6. –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - Title: "–£—Ç—Ä–µ–Ω–Ω—è—è —Ä—É—Ç–∏–Ω–∞"
   - Priority: medium
   - Recurring: true (FREQ=DAILY)
   - Subtasks: 3 –ø–æ–¥–∑–∞–¥–∞—á–∏
   ‚Üì
7. –ü–µ—Ä–µ—Ö–æ–¥ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ Tasks Page
   ‚úÖ –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é!
```

---

## üí° –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

- [ ] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã (—Å–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é)
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ (Work, Health, Home, etc.)
- [ ] Sharing —à–∞–±–ª–æ–Ω–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–æ–≤
- [ ] Marketplace —à–∞–±–ª–æ–Ω–æ–≤ (community templates)

---

## üêõ Troubleshooting:

### –ü—Ä–æ–±–ª–µ–º–∞: –®–∞–±–ª–æ–Ω—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
docker-compose exec backend alembic current
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: a1b2c3d4e5f6 (create_task_templates_table)

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —à–∞–±–ª–æ–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
docker-compose exec postgres psql -U postgres -d memoir
SELECT COUNT(*) FROM task_templates WHERE is_system = true;
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 8

# 3. –ï—Å–ª–∏ 0, –∑–∞–ø—É—Å—Ç–∏—Ç–µ seeding —Å–Ω–æ–≤–∞
docker-compose exec backend python -m app.db.seed_templates
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç task_data (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å valid JSON)
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ subtasks –∏–º–µ—é—Ç –ø–æ–ª—è title –∏ order
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ scheduled_time –≤ —Ñ–æ—Ä–º–∞—Ç–µ "HH:MM"

---

## üìù API –ü—Ä–∏–º–µ—Ä—ã:

### GET /api/v1/task-templates

```bash
curl -X GET "http://localhost:8000/api/v1/task-templates?is_system=true" \
  -H "Authorization: Bearer $TOKEN"
```

### POST /api/v1/task-templates/{id}/use

```bash
curl -X POST "http://localhost:8000/api/v1/task-templates/{template_id}/use" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "due_date": "2025-12-10T08:00:00Z",
    "scheduled_time": "08:00"
  }'
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 9 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready - –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!
