# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Memoir - Personal Memory AI

ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ, Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹ Ğ¸ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ñ‹Ñ… Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹.

---

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Flutter App                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Presentation Layer (UI + BLoC)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Domain Layer (Entities + UseCases + Repositories)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Data Layer (Models + DataSources + Repo Impl)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚ HTTP / REST API
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   FastAPI Backend        â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  API Endpoints     â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚         â”‚                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Services          â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚         â”‚                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Models (ORM)      â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚            â”‚                 â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚PostgreSQLâ”‚  â”‚  Redis  â”‚    â”‚  OpenAI    â”‚
â”‚+pgvector â”‚  â”‚         â”‚    â”‚   API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
              â”‚  Celery  â”‚
              â”‚  Worker  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ¾ÑĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ

```
User (Flutter) â†’ POST /api/v1/memories
                     â†“
              FastAPI Endpoint
                     â†“
              Memory Service
                     â†“
              PostgreSQL (save)
                     â†“
              Return Memory â† Response
                     â†“
              Trigger Celery Task (async)
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                        â”‚
    Classify         Generate Embedding
    (OpenAI)         (OpenAI)
         â”‚                        â”‚
         â†“                        â†“
    Update Memory            Save to embeddings
    (category, tags)         table (vector)
```

### 2. Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº

```
User Query â†’ POST /api/v1/search/semantic?q=...
                     â†“
              Generate Query Embedding
                     (OpenAI API)
                     â†“
              Vector Similarity Search
                     (pgvector)
                     â†“
              Fetch Matching Memories
                     â†“
              Return Results
```

---

## ğŸ¨ Frontend: Clean Architecture (Flutter)

### Ğ¡Ğ»Ğ¾Ğ¸ Ğ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer                        â”‚
â”‚  - Pages (UI Screens)                            â”‚
â”‚  - Widgets (Reusable components)                 â”‚
â”‚  - BLoC (State Management)                       â”‚
â”‚                                                   â”‚
â”‚  Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ â†’ Domain Layer                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“ (uses)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Domain Layer                               â”‚
â”‚  - Entities (Business models)                     â”‚
â”‚  - Repositories (Interfaces)                      â”‚
â”‚  - UseCases (Business logic)                      â”‚
â”‚                                                   â”‚
â”‚  ĞĞµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… ÑĞ»Ğ¾Ñ‘Ğ²!                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†‘ (implements)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Data Layer                                 â”‚
â”‚  - Models (JSON DTO)                              â”‚
â”‚  - DataSources (Remote API, Local Cache)          â”‚
â”‚  - Repository Implementations                      â”‚
â”‚                                                   â”‚
â”‚  Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ â†’ Domain Layer                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Memory Feature

```dart
// Domain Layer (entities/memory.dart)
class Memory {
  final String id;
  final String title;
  // ... pure business logic entity
}

// Domain Layer (repositories/memory_repository.dart)
abstract class MemoryRepository {
  Future<Either<Failure, List<Memory>>> getMemories();
  Future<Either<Failure, Memory>> createMemory(MemoryCreate data);
}

// Data Layer (models/memory_model.dart)
class MemoryModel extends Memory {
  // JSON serialization
  factory MemoryModel.fromJson(Map<String, dynamic> json);
  Map<String, dynamic> toJson();
}

// Data Layer (repositories/memory_repository_impl.dart)
class MemoryRepositoryImpl implements MemoryRepository {
  final MemoryRemoteDataSource remoteDataSource;
  
  @override
  Future<Either<Failure, List<Memory>>> getMemories() async {
    try {
      final models = await remoteDataSource.getMemories();
      return Right(models.map((m) => m.toEntity()).toList());
    } catch (e) {
      return Left(ServerFailure());
    }
  }
}

// Presentation Layer (bloc/memory_list_bloc.dart)
class MemoryListBloc extends Bloc<MemoryListEvent, MemoryListState> {
  final GetMemoriesUseCase getMemoriesUseCase;
  
  on<LoadMemories>((event, emit) async {
    emit(MemoryListLoading());
    final result = await getMemoriesUseCase();
    result.fold(
      (failure) => emit(MemoryListError(failure.message)),
      (memories) => emit(MemoryListLoaded(memories)),
    );
  });
}
```

### State Management (BLoC Pattern)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI Widget  â”‚
â”‚              â”‚
â”‚  listens to  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ State Stream
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       BLoC           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  State         â”‚  â”‚ (Immutable)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â–²            â”‚
â”‚         â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Event Handler â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Events
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Actions   â”‚
â”‚  (button press,  â”‚
â”‚   page load)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ Backend: Layered Architecture (FastAPI)

### Ğ¡Ğ»Ğ¾Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         API Layer                        â”‚
â”‚  - Endpoints (routes)                   â”‚
â”‚  - Request/Response handling            â”‚
â”‚  - Validation (Pydantic)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Service Layer                     â”‚
â”‚  - Business logic                        â”‚
â”‚  - Orchestration                         â”‚
â”‚  - Error handling                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Repository/Model Layer            â”‚
â”‚  - Database operations (SQLAlchemy)      â”‚
â”‚  - ORM models                            â”‚
â”‚  - Database sessions                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Memory Create Flow

```python
# API Layer (api/v1/memories.py)
@router.post("", response_model=Memory)
async def create_memory(
    memory_data: MemoryCreate,
    db: AsyncSession = Depends(get_db),
    current_user: User = Depends(get_current_user),
):
    memory = await MemoryService.create_memory(
        db, str(current_user.id), memory_data
    )
    
    # Trigger async AI processing
    process_memory_full.delay(str(memory.id))
    
    return memory

# Service Layer (services/memory_service.py)
class MemoryService:
    @staticmethod
    async def create_memory(
        db: AsyncSession,
        user_id: str,
        memory_data: MemoryCreate
    ) -> Memory:
        # Validate category if provided
        if memory_data.category_id:
            category = await db.get(Category, memory_data.category_id)
            if not category:
                raise NotFoundError("Category not found")
        
        # Create memory
        new_memory = Memory(
            user_id=user_id,
            title=memory_data.title,
            content=memory_data.content,
            # ...
        )
        
        db.add(new_memory)
        await db.commit()
        await db.refresh(new_memory)
        
        return new_memory

# Task Layer (tasks/ai_tasks.py)
@celery_app.task(name="process_memory_full")
def process_memory_full(memory_id: str):
    # 1. Classify
    classification = classify_memory_async(memory_id)
    
    # 2. Generate embedding
    embedding = generate_embedding_async(memory_id)
    
    return {"classification": classification, "embedding": embedding}
```

---

## ğŸ¤– AI Integration Architecture

### OpenAI Services

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             AIService                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  classify_memory()                        â”‚  â”‚
â”‚  â”‚  - GPT-4o-mini                            â”‚  â”‚
â”‚  â”‚  - System prompt with categories          â”‚  â”‚
â”‚  â”‚  - Returns: category, confidence,         â”‚  â”‚
â”‚  â”‚    extracted_data                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  generate_embedding()                     â”‚  â”‚
â”‚  â”‚  - text-embedding-3-small                 â”‚  â”‚
â”‚  â”‚  - Returns: vector[1536]                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  generate_tags()                          â”‚  â”‚
â”‚  â”‚  - GPT-4o-mini                            â”‚  â”‚
â”‚  â”‚  - Returns: list[str]                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  extract_entities()                       â”‚  â”‚
â”‚  â”‚  - Category-specific extraction           â”‚  â”‚
â”‚  â”‚  - Returns: dict with metadata            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Classification Prompt Strategy

```python
SYSTEM_PROMPT = """
Ğ¢Ñ‹ â€” AI-Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Personal Memory.
ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€ÑƒĞ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ğ² Ğ¾Ğ´Ğ½Ñƒ Ğ¸Ğ· ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹:
- movies (Ñ„Ğ¸Ğ»ÑŒĞ¼Ñ‹, ÑĞµÑ€Ğ¸Ğ°Ğ»Ñ‹)
- books (ĞºĞ½Ğ¸Ğ³Ğ¸, ÑÑ‚Ğ°Ñ‚ÑŒĞ¸)
- places (Ğ¼ĞµÑÑ‚Ğ°, Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½Ñ‹)
- ideas (Ğ¸Ğ´ĞµĞ¸, Ğ¸Ğ½ÑĞ°Ğ¹Ñ‚Ñ‹)
- recipes (Ñ€ĞµÑ†ĞµĞ¿Ñ‚Ñ‹)
- products (Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹)

Ğ’ĞµÑ€Ğ½Ğ¸ JSON:
{
  "category": "Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ",
  "confidence": 0.95,
  "reasoning": "Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ",
  "extracted_data": {...}
}
"""

USER_PROMPT = f"ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚: {memory.content}"
```

### Embedding Strategy

1. **ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚:** `title + "\n\n" + content`
2. **ĞœĞ¾Ğ´ĞµĞ»ÑŒ:** text-embedding-3-small (512 dims â†’ 1536 dims)
3. **Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ:** PostgreSQL Ñ pgvector Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸ĞµĞ¼
4. **Ğ˜Ğ½Ğ´ĞµĞºÑ:** ivfflat Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ cosine similarity

### Semantic Search Flow

```
Query: "Ñ„Ğ¸Ğ»ÑŒĞ¼Ñ‹ Ğ¿Ñ€Ğ¾ ĞºĞ¾ÑĞ¼Ğ¾Ñ"
   â†“
Generate embedding[1536]
   â†“
SELECT * FROM memories m
JOIN embeddings e ON m.id = e.memory_id
ORDER BY e.embedding <=> query_vector
LIMIT 10
   â†“
Results: [Interstellar, Gravity, Martian, ...]
```

---

## ğŸ’¾ Database Schema

### ERD Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     users       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID) PK    â”‚
â”‚ email           â”‚
â”‚ username        â”‚
â”‚ hashed_password â”‚
â”‚ created_at      â”‚
â”‚ updated_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      memories           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID) PK            â”‚
â”‚ user_id (UUID) FK       â”‚â”€â”€â”€â”€â”
â”‚ category_id (UUID) FK   â”‚    â”‚
â”‚ title                   â”‚    â”‚
â”‚ content                 â”‚    â”‚
â”‚ source_type (ENUM)      â”‚    â”‚
â”‚ source_url              â”‚    â”‚
â”‚ metadata (JSONB)        â”‚    â”‚
â”‚ ai_confidence (FLOAT)   â”‚    â”‚
â”‚ tags (ARRAY)            â”‚    â”‚
â”‚ created_at              â”‚    â”‚
â”‚ updated_at              â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
          â”‚                     â”‚
          â”‚ 1:1                 â”‚ N:1
          â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   embeddings        â”‚   â”‚   categories   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (UUID) PK        â”‚   â”‚ id (UUID) PK   â”‚
â”‚ memory_id (UUID) FK â”‚   â”‚ name           â”‚
â”‚ embedding (VECTOR)  â”‚   â”‚ display_name   â”‚
â”‚ model               â”‚   â”‚ icon           â”‚
â”‚ created_at          â”‚   â”‚ color          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ created_at     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Indexes

```sql
-- Performance indexes
CREATE INDEX idx_memories_user_id ON memories(user_id);
CREATE INDEX idx_memories_category_id ON memories(category_id);
CREATE INDEX idx_memories_created_at ON memories(created_at DESC);
CREATE INDEX idx_embeddings_memory_id ON embeddings(memory_id);

-- Vector search index (IVFFlat)
CREATE INDEX idx_embeddings_vector ON embeddings 
  USING ivfflat (embedding vector_cosine_ops) 
  WITH (lists = 100);
```

---

## ğŸ” Security Architecture

### Authentication Flow

```
1. User Registration/Login
   â†“
2. Server generates:
   - access_token (JWT, 30 min lifetime)
   - refresh_token (JWT, 7 days lifetime)
   â†“
3. Client stores tokens (SharedPreferences/SecureStorage)
   â†“
4. API requests include: Authorization: Bearer {access_token}
   â†“
5. Token expires?
   â†’ Client sends refresh_token to /api/v1/auth/refresh
   â†’ Server returns new access_token + refresh_token
   â†“
6. Refresh token expired?
   â†’ User must re-login
```

### JWT Structure

```json
{
  "sub": "user_id",
  "exp": 1234567890,
  "type": "access"  // or "refresh"
}
```

### Password Security

- **Hashing:** bcrypt (via passlib)
- **Salt:** Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ² bcrypt)
- **Rounds:** 12 (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)

---

## ğŸš€ Deployment Architecture

### Development (Docker Compose)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Docker Host                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚PostgreSQLâ”‚  â”‚  Redis   â”‚  â”‚ Backend  â”‚ â”‚
â”‚  â”‚  :5432   â”‚  â”‚  :6379   â”‚  â”‚  :8000   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  Celery  â”‚  â”‚  Flower  â”‚                â”‚
â”‚  â”‚  Worker  â”‚  â”‚  :5555   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘
         â”‚ HTTP
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚  Flutter â”‚
    â”‚   App    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ°Ñ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Cloud Provider (AWS/GCP/DO)        â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Load Balancer (HTTPS)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Backend (ECS/GKE/Kubernetes)             â”‚  â”‚
â”‚  â”‚  - FastAPI containers (N replicas)        â”‚  â”‚
â”‚  â”‚  - Auto-scaling                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Celery Workers                           â”‚  â”‚
â”‚  â”‚  - Separate worker containers             â”‚  â”‚
â”‚  â”‚  - Queue-based scaling                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Managed Services                         â”‚  â”‚
â”‚  â”‚  - RDS PostgreSQL (+pgvector)             â”‚  â”‚
â”‚  â”‚  - ElastiCache Redis                      â”‚  â”‚
â”‚  â”‚  - S3 for file storage                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘
           â”‚ HTTPS
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
      â”‚  Mobile  â”‚
      â”‚   Apps   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Considerations

### Backend Optimization

1. **Database Connection Pooling**
   - AsyncPG connection pool
   - Max 20 connections per worker

2. **Caching Strategy**
   - Redis Ğ´Ğ»Ñ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹
   - TTL: 1 Ñ‡Ğ°Ñ
   - Invalidation Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸

3. **Async Processing**
   - All I/O operations async (FastAPI + asyncpg)
   - Non-blocking AI processing (Celery)

4. **Database Indexes**
   - Composite indexes Ğ´Ğ»Ñ Ñ‡Ğ°ÑÑ‚Ñ‹Ñ… queries
   - Vector index (ivfflat) Ğ´Ğ»Ñ embeddings

### Frontend Optimization

1. **State Management**
   - BLoC Ğ´Ğ»Ñ centralized state
   - Immutable states Ğ´Ğ»Ñ predictable updates

2. **Local Caching**
   - Hive Ğ´Ğ»Ñ offline storage
   - Cache-first strategy

3. **Lazy Loading**
   - Pagination Ğ´Ğ»Ñ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ²
   - Infinite scroll

4. **Image Optimization**
   - CachedNetworkImage Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾ĞºĞµÑˆĞ°
   - Thumbnail generation Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ

---

## ğŸ”„ Scalability Plan

### Horizontal Scaling

**Backend:**
- Stateless FastAPI â†’ N replicas Ğ·Ğ° Load Balancer
- Celery workers â†’ Auto-scale Ğ¿Ğ¾ queue size

**Database:**
- Read replicas Ğ´Ğ»Ñ read-heavy queries
- Connection pooling (PgBouncer)

**Caching:**
- Redis Cluster Ğ´Ğ»Ñ distributed cache

### Vertical Scaling

**Database:**
- Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ RAM Ğ´Ğ»Ñ PostgreSQL
- SSD storage Ğ´Ğ»Ñ faster I/O

**Backend:**
- Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ CPU Ğ´Ğ»Ñ Celery workers (AI tasks)

---

## ğŸ¯ Key Design Decisions

### 1. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Clean Architecture Ğ²Ğ¾ Flutter?
- âœ… Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ğ¾Ñ‚ UI
- âœ… Ğ›ĞµĞ³ĞºĞ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (mocking layers)
- âœ… ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ features
- âœ… ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚ Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€ĞºĞ¾Ğ²

### 2. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ FastAPI?
- âœ… Async by default â†’ Ğ²Ñ‹ÑĞ¾ĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ
- âœ… ĞĞ²Ñ‚Ğ¾Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ OpenAPI docs
- âœ… Pydantic validation Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸
- âœ… Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ°Ñ ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ»Ñ Python AI

### 3. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ PostgreSQL + pgvector?
- âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ°Ñ Ğ‘Ğ” Ñ ACID Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸ÑĞ¼Ğ¸
- âœ… pgvector â†’ native vector search Ğ±ĞµĞ· Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°
- âœ… JSONB Ğ´Ğ»Ñ flexible metadata
- âœ… ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ¸Ğ½Ğ´ĞµĞºÑĞ°Ğ¼Ğ¸

### 4. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Celery?
- âœ… AI-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ (1-3 sec)
- âœ… Non-blocking UX Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- âœ… Retry logic Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸
- âœ… ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ‡ĞµÑ€ĞµĞ· Flower

### 5. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ BLoC pattern?
- âœ… Predictable state management
- âœ… Separation of concerns
- âœ… Easy testing
- âœ… Recommended by Flutter team

---

## ğŸ“ˆ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

### Backend Metrics

- **Request latency:** P50, P95, P99
- **Error rate:** 4xx, 5xx
- **Celery queue size**
- **Database connections**
- **OpenAI API usage & cost**

### Frontend Metrics

- **Crash-free rate**
- **Screen load time**
- **API response time from client**
- **User retention (D1, D7, D30)**

---

## ğŸ›£ï¸ Roadmap

### Phase 1: MVP (Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ) âœ…
- Backend API
- AI ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ
- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Flutter ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

### Phase 2: UI Completion â³
- ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğµ Auth screens
- Home page Ñ memories
- Create/Edit flows
- Search UI

### Phase 3: Advanced Features â³
- Image upload + OCR
- Voice notes + transcription
- Share sheet integration
- Push notifications

### Phase 4: Optimization â³
- Offline-first
- Advanced caching
- Performance tuning
- Comprehensive testing

### Phase 5: Production â³
- CI/CD pipeline
- Production deployment
- Monitoring & alerting
- User analytics

---

## ğŸ“š ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹

- [Clean Architecture by Uncle Bob](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [BLoC Pattern Documentation](https://bloclibrary.dev/)
- [FastAPI Best Practices](https://github.com/zhanymkanov/fastapi-best-practices)
- [pgvector Performance Tuning](https://github.com/pgvector/pgvector#performance)
- [OpenAI Best Practices](https://platform.openai.com/docs/guides/production-best-practices)

